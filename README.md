# 问卷调查系统

## 一、简介

​	本系统可整合进CRM系统，暂未整合。

​	员工登录后可以添加、编辑、删除问卷，预览功能暂未实现。

​	示例如图：

​	![示例](https://raw.githubusercontent.com/MaksimSun/questionnaire/master/screenshots/%E7%A4%BA%E4%BE%8B.png)

## 二、技术点

### 1、使用自定义的`ModelForm`类动态生成标签

​	在编辑问卷页面，问卷的每一个问题的标题、类型都各不相同，如果从数据库中筛选，然后手动在前端页面生成标签，流程将极其繁琐。

​	但由于所有问题都属于同一张数据库表，所以使用同一个`ModelForm`类分别对每一条问题记录进行实例化，前端即可动态生成该问题下的标签，省时省力。

​	同理，单选问题下不同的选项也可以使用另一个自定义的`ModelForm`类进行动态渲染

### 2、使用生成器嵌套返回`ModelForm`对象，优化性能

​	在上面的编辑页面中，针对一个问卷下的所有问题，对其进行了遍历并动态生成`ModelForm`对象，为了优化性能，没有使用列表或字典存储所有结果，而是利用生成器，将每一个问题对象进行了yield处理。

​	单选类的问题跟其他类型问题不同，针对问题还需要筛选出它下属的所有选项，遍历并使用另一个`ModelForm`类进行动态实例化，所以，使用了**生成器嵌套**。

​	在内层生成器中使用一个临时字典对不同类型问题的样式进行控制，所以生成器嵌套适用于所以类型的问题，具有普适性。